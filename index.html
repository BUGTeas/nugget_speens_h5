<!DOCTYPE html>
<html>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=10"/>
    <head>
        <style>
            html,body{
                margin:0;
                height:100%;
                overflow:hidden;
            }
            #shadowbox{
                border-radius:100%;
            }
            #timer{
                position:absolute;
                user-select:none;
                cursor:move;
            }
            #option{
                position:absolute;
                z-index:3;
                background:rgba(123,123,123,0.5);
                top:0;
                right:0;
                padding:20px;
                overflow:auto;
                min-height:auto;
                max-height:calc(100% - 40px);
                font-size:13px;
            }
            .range{
                min-width:calc(100% - 150px);
                max-width:100px;
            }
            .input{
                width:35px;
                border:1px solid #aaa;
                border-radius:10px;
                margin:5px;
                padding:5px;
            }
            #option button{
                padding:10px;
                background:rgb(46, 102, 255);
                color:#fff;
                border:0;
                border-radius:5px;
                font-size:15px;
                margin:10px;
                width:150px;
                transition-property:all;
                transition-duration:200ms;
            }
            #option button:hover{
                background:rgb(100, 142, 255);
            }
            #option button:active{
                transform:scale(0.9);
            }
            #option .optsw{
                display:inline-block;
                font-size:20px;
                user-select:none;
                padding-bottom:5px;
                margin:0px 20px 10px 0px;
            }
            #option .optsw:hover{
                font-weight:bolder;
            }
            #inputtext{
                border:1px solid #aaa;
                border-radius:10px;
                padding:5px;
                min-width:calc(100% - 10px);
                max-width:calc(100% - 10px);
                min-height:50px;
                max-height:200px;
            }
            hr{
                border:0.5px solid #aaa;
            }

            
            .window_bg{
                width:100%;
                height:100%;
                top:0px;
                left:0px;
                background:rgba(128,128,128,0.5);
                position:absolute;
                z-index:4;
                display:none;
            }
            .window{
                width:250px;
                height:300px;
                background:#fff;
                box-shadow:0px 7px 12px rgba(128,128,128,0.5);
                margin-left:calc(50% - 145px);
                padding:20px;
                border:1px solid #ddd;
                border-radius:5px;
            }
            .window div,table{
                margin-bottom:10px;
            }
            .window button{
                border:none;
                border-radius:3px;
                background-color:rgb(41, 108, 255);
                color:white;
                padding:10px;
                margin-right:10px;
            }
            #rgbeditor_window .optsw{
                display:inline-block;
                font-size:20px;
                user-select:none;
                padding-bottom:5px;
                margin-bottom:10px;
            }
            #rgbeditor_window table{
                border-collapse:collapse;
                width:100%;
            }
            #rgbeditor_window table td{
                text-align:right;
                padding:7px 0 7px 0;
            }
            .rgbeditor_input{
                width:40px;
                border:1px solid #ccc;
                border-radius:3px;
                padding:5px;
                margin-left:2px;
            }
            #bgimg_input_btn{
                width:120px;
                border:none;
                border-radius:3px;
                background-color:rgb(41, 108, 255);
                color:white;
                padding:10px;
                margin-left:10px;
            }
            .rgbeditor_range{
                width:calc(100% - 5px);
                margin-left:5px;
            }
            .rgbeditor_optname{
                font-size:15px;
            }
        </style>
        <style id="animationset"></style>
    </head>
    <body id="body">
        
        <!--é¡µé¢åŠ è½½è¿‡ç¨‹é®ç½©-->
        <div id="loadingMask" style="position:absolute;z-index:5;top:0px;left:0px;width:100%;height:100%;padding:30px;font-size:40px;font-weight:lighter;color:#888;background-color:#fff;">è¯·ç¨å€™...</div>

        <!--é¡¶éƒ¨ä¸Šä¸‹æ™ƒåŠ¨-->
        <div id="headbox"></div>
        <!--æ—‹è½¬ç‰©ä½“-->
        <div id="rotationbox"></div>
        <!--é˜´å½±-->
        <div id="shadowbox"></div>
        <div id="timer" style="background:rgba(17,69,20,0);color:rgba(0,0,0,1)">11:45:14</div>


        <!--å³ä¸Šè§’é€‰é¡¹æŒ‰é’®-->
        <div id="tips" style="position:absolute;top:0px;right:0px;width:100px;height:100px;display:none;text-align:right;background:rgba(0,0,0,0.2);color:#555;font-size:20px;padding:10px">ç‚¹å‡»æ­¤åŒºåŸŸ<br>è¿›å…¥é€‰é¡¹<div style="font-size:30px;padding-top:5px">ğŸ‘†</div></div>
        <button id="optbtn" style="border:none;background:none;position:absolute;top:0px;right:0px;width:100px;height:100px;outline:none;" onclick="
            document.getElementById('option').style.display = 'block';
            document.getElementById('tips').remove();
        "></button>

        <!--ç”¨æˆ·é€‰é¡¹-->
        <div id="option">

            <!--åˆ‡æ¢é€‰é¡¹å¡-->
            <div class="optsw" id="imgopt_sw" onclick="showmode(this.id)">å›¾ç‰‡</div>
            <div class="optsw" id="vidopt_sw" onclick="showmode(this.id)">è§†é¢‘</div>
            <div class="optsw" id="txtopt_sw" onclick="showmode(this.id)">æ–‡æœ¬æˆ– HTML</div>

            <!--æ–‡å­—/ä»£ç è®¾ç½®ç•Œé¢-->
            <div id="txtopt">
                <p style='margin-bottom:5px'>å¦‚éœ€æ¢è¡Œï¼Œè¯·ä½¿ç”¨â€œ&lt;br&gt;â€</p>
                <textarea rows="5" id="inputtext" oninput="applytext()">æ—‹è½¬ ã® é¡µé¢</textarea>
                <div><button style="width:auto;padding:5px;font-size:12px" onclick="rgb_id='showtext';rgb_attribute='style.color';coloropt_init('x','opacity')">å­—ä½“é¢œè‰²</button><button style="width:auto;padding:5px;font-size:12px" onclick="rgb_id='showtext';rgb_attribute='style.backgroundColor';coloropt_init('x','opacity')">èƒŒæ™¯é¢œè‰²</button></div>
                å­—ä½“å¤§å°ï¼š<br><input id='textsizerange' class="range" type='range' min='0' max='360' value='72' oninput="applytext('sizerange')"/><div style="display:inline-block"><input id='textsizeinput' class="input" value="72" oninput='applytext()'/>åƒç´ </div>
            </div>

            <!--å›¾ç‰‡è®¾ç½®ç•Œé¢-->
            <div id="imgopt">
                <div id="imgopt_user">
                    <p style='margin-bottom:5px;text-align:center'>å›¾ç‰‡å¤§å°ä¸å»ºè®®è¶…è¿‡2Mï¼Œå¦åˆ™æµè§ˆå™¨ä¼šå¡é¡¿ç”šè‡³é—ªé€€</p>
                    <div style="text-align:center"><button onclick="document.getElementById('imgFileInput').click()">ï¼‹ é€‰æ‹©æœ¬åœ°æ–‡ä»¶</button></div>
                    <input id='imgFileInput' style="display:none" type='file'/>
                </div>
                å®½åº¦ï¼š<input id='imgWidthRange' class="range" type='range' min='0' max='500' value='150' oninput="applyimgvid('img','range')"/><div style="display:inline-block"><input id='imgWidthInput' value='150' class="input" oninput="applyimgvid('img')"/>åƒç´ </div>
            </div>
            
            <!--è§†é¢‘è®¾ç½®ç•Œé¢-->
            <div id="vidopt">
                <div id="vidopt_user">
                    <p style='margin-bottom:5px;text-align:center'>è§†é¢‘å°†åœ¨é€‰é¡¹å…³é—­ 3 ç§’åå¼€å§‹å¾ªç¯æ’­æ”¾<br>è‹¥æ²¡æœ‰å“åº”ï¼Œç‚¹ä¸€ä¸‹æ—‹è½¬ç‰©ä½“å³å¯</p>
                    <div style="text-align:center"><button onclick="document.getElementById('vidFileInput').click()">ï¼‹ é€‰æ‹©æœ¬åœ°æ–‡ä»¶</button></div>
                    <input id='vidFileInput' style="display:none" type='file'/>
                </div>
                å®½åº¦ï¼š<input id='vidWidthRange' class="range" type='range' min='0' max='500' value='150' oninput="applyimgvid('vid','range')"/><div style="display:inline-block"><input id='vidWidthInput' value='300' class="input" oninput="applyimgvid('vid')"/>åƒç´ </div>
            </div>
            <!--æ•ˆæœè®¾ç½®-->
            <hr>
            
            Xè½´ï¼š<input id='Xanglerange' class="range" type='range' min='0' max='360' oninput="anglechange('xrange')"/><div style="display:inline-block"><input id='Xangleinput' class="input" value='0' oninput='anglechange()'/>Â°</div><hr>

            Zè½´ï¼š<input id='Zanglerange' class="range" type='range' min='0' max='360' oninput="anglechange('zrange')"/><div style="display:inline-block"><input id='Zangleinput' class="input" value='0' oninput='anglechange()'/>Â°</div><hr>

            é€è§†ï¼š<input id='perspectrange' class="range" type='range' min='0' max='1000' oninput="anglechange('prange')"/><div style="display:inline-block"><input id='perspectinput' class="input" value='500' oninput='anglechange()'/>åƒç´ </div><hr>

            é€Ÿåº¦ï¼š<input id='speedrange' class="range" type='range' min='0' max='9999' oninput="anispeed('range')"/><div style="display:inline-block"><input id='speedinput' class="input" value='1.3' oninput='anispeed()'/>ç§’/è½¬</div><hr>

            <p style='margin-bottom:5px'>å°†é€è§†è°ƒæ•´è‡³75~125å¯ä»¥æå‡å›¾åƒæˆ–æ–‡å­—çš„ç«‹ä½“æ„Ÿã€‚</p>
            <div onclick="setTimeout('reverse_shadow_sw()',10)"><input type="checkbox" id="reverse_sw"/><label for="reverse_sw"> åå‘</label>&nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" id="shadow_sw"/><label for="shadow_sw"> é˜´å½±</label><button style="width:auto;padding:5px;font-size:12px" onclick="rgb_id='body';rgb_attribute='style.background';coloropt_init('bgimg')">æ›´æ”¹èƒŒæ™¯</button><button style="width:auto;padding:5px;font-size:12px" onclick="document.getElementById('timeropt').style.display = 'block'">è®¡æ—¶å™¨</button></div>
            <div style="text-align:center;margin-top:10px;"><button onclick="
                loadtime();
                document.getElementById('option').style.display = 'none';
                document.getElementById('tips').style.display = 'block';
            ">å…³é—­</button></div>
        </div>

        <!--èƒŒæ™¯å›¾ç‰‡/é¢œè‰²è®¾ç½®ç•Œé¢-->
        <div class="window_bg" id="timeropt">
            <div style="height:calc(50% - 170px);"></div>
            <div class="window" id="timeropt_window">
                <div style="margin-bottom:10px;height:30px">
                    <div style="font-size:15px;display:inline-block">è®¡æ—¶å™¨</div>
                    <button style="float:right;border:none;background:none;padding:0px;margin:0px;font-size:20px;font-weight:bolder;font-family:monospace;color:#555" onclick="document.getElementById('timeropt').style.display = 'none'">Ã—</button>
                </div>
                <div onclick="timer_optapply()"><input type="checkbox" id="timer_enabled"/><label for="timer_enabled"> å¯ç”¨</label></div>
                <table style="width:100%;border-collapse:collapse;">
                    <tr>
                        <td class="rgbeditor_optname">å¤§å°</td>
                        <td><input type="range" min='5' max='200' value="48" class="rgbeditor_range" id="timersizerange" oninput="timer_optapply('sizerange')"/></td>
                        <td><input type="number" class="rgbeditor_input" id="timersizeinput" oninput="timer_optapply()"/></td>
                    </tr>
                </table>
                <div onclick="timer_optapply()">
                    <input type="radio" name="timerweight" id="timer_lighter" value="lighter"><label for="timer_lighter">ç»†ä½“</label>
                    <input type="radio" name="timerweight" id="timer_normal" value="normal" checked><label for="timer_normal">å¸¸è§„</label>
                    <input type="radio" name="timerweight" id="timer_bolder" value="bolder"><label for="timer_bolder">åŠ ç²—</label>
                </div>
                <div>
                    <button style="width:auto;padding:5px;font-size:12px" onclick="rgb_id='timer';rgb_attribute='style.color';coloropt_init('x','opacity')">å­—ä½“é¢œè‰²</button><button style="width:auto;padding:5px;font-size:12px" onclick="rgb_id='timer';rgb_attribute='style.backgroundColor';coloropt_init('x','opacity')">èƒŒæ™¯é¢œè‰²</button>
                </div>
                <div>å¦‚éœ€è°ƒæ•´ä½ç½®ï¼Œå¯ä»¥ç›´æ¥æ‹–åŠ¨è®¡æ—¶å™¨ã€‚</div>
            </div>
        </div>

        <!--èƒŒæ™¯å›¾ç‰‡/é¢œè‰²è®¾ç½®ç•Œé¢-->
        <div class="window_bg" id="rgbeditor">
            <div style="height:calc(50% - 170px);"></div>
            <div class="window" id="rgbeditor_window">
            <div style="margin-bottom:10px"><span id="bgopt_sw" style="display:none">
                    <div class="optsw" id="bgimg_sw" onclick="coloropt_mode(this.id)">å›¾ç‰‡</div>
                    <div style="display:inline-block;width:20px;"></div>
                    <div class="optsw" id="rgbedt_sw" onclick="coloropt_mode(this.id)">é¢œè‰²</div>
                </span>
                <button style="float:right;border:none;background:none;padding:0px;margin:0px;font-size:20px;font-weight:bolder;font-family:monospace;color:#555" onclick="document.getElementById('rgbeditor').style.display = 'none'">Ã—</button>
            </div>
            <div id="bgimg">
                <p style='margin-bottom:5px;text-align:center'>å›¾ç‰‡å¤§å°ä¸å»ºè®®è¶…è¿‡2Mï¼Œå¦åˆ™æµè§ˆå™¨ä¼šå¡é¡¿ç”šè‡³é—ªé€€</p>
                <div style="text-align:center"><button id="bgimg_input_btn" onclick="document.getElementById('bgimg_input').click()">ï¼‹ é€‰æ‹©æœ¬åœ°æ–‡ä»¶</button></div>
                <input id='bgimg_input' style="display:none" type='file'/>
            </div>
            <table id="rgbedt">
                <tr>
                    <td class="rgbeditor_optname">çº¢</td>
                    <td><input type="range" min='0' max='255' class="rgbeditor_range" id="rgbeditor_range_r" oninput="rgbeditor_rgba(this.id)"/></td>
                    <td><input type="number" class="rgbeditor_input" id="rgbeditor_input_r" oninput="rgbeditor_rgba(this.id)"/></td>
                </tr>
                <tr>
                    <td class="rgbeditor_optname">ç»¿</td>
                    <td><input type="range" min='0' max='255' class="rgbeditor_range" id="rgbeditor_range_g" oninput="rgbeditor_rgba(this.id)"/></td>
                    <td><input type="number" class="rgbeditor_input" id="rgbeditor_input_g" oninput="rgbeditor_rgba(this.id)"/></td>
                </tr>
                <tr>
                    <td class="rgbeditor_optname">è“</td>
                    <td><input type="range" min='0' max='255' class="rgbeditor_range" id="rgbeditor_range_b" oninput="rgbeditor_rgba(this.id)"/></td>
                    <td><input type="number" class="rgbeditor_input" id="rgbeditor_input_b" oninput="rgbeditor_rgba(this.id)"/></td>
                </tr>
                <tr>
                    <td class="rgbeditor_optname">16è¿›åˆ¶</td>
                    <td colspan="2"><input class="rgbeditor_input" style="width:auto" id="rgbeditor_hex" value="#fff" onblur="rgbeditor_rgba(this.id)"/></td>
                </tr>
                <tr id="rgbeditor_opacity" style="display:none">
                    <td class="rgbeditor_optname">é€æ˜åº¦</td>
                    <td><input type="range" min='0' max='100' class="rgbeditor_range" id="rgbeditor_range_a" oninput="rgbeditor_rgba(this.id)"/></td>
                    <td><input type="number" class="rgbeditor_input" id="rgbeditor_input_a" oninput="rgbeditor_rgba(this.id)"/></td>
                </tr>
                <tr>
                    <td class="rgbeditor_optname" colspan="2">é¢„è§ˆ</td>
                    <td><div class="rgbeditor_input" style="padding:0px;float:right;width:50px;height:25px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAABFSURBVChTnY/BCQAwCANN53J73cv2IZUqUvA+BhIwgYgYJZjZVbD8fpkFAbiqPEGzUveCYxZXVV0Fbcdcow3mR7PVPUQbAmQQV9LXPVwAAAAASUVORK5CYII=);overflow:hidden"><div id="rgbeditor_preview" style="height:100%;width:100%"></div></div></td>
                </tr>
            </table>
            </div>
        </div>

        <!--é¢œè‰²è®¾ç½®è„šæœ¬-->
        <script type="text/javascript"src="./rgbeditor.js"></script>
        <script type="text/JavaScript">
            
            //æ—‹è½¬æ¡†æ¶å°ºå¯¸
            lastsize = 0;
            function resizebox(){
                var rotationbox = document.getElementById("rotationbox");
                var shadowbox = document.getElementById("shadowbox");
                var winbody = document.body;
                if(winbody.clientWidth - winbody.clientHeight!=lastsize) applyresize();
                setTimeout(function(){resizebox()},25)
            }

            function applyresize(){
                var winbody = document.body;
                if(winbody.clientWidth>=360) document.getElementById("option").style.width = "320px";
                else document.getElementById("option").style.width = "calc(100% - 40px)";
                var showname = "none"
                if(document.getElementById("showimg")) var showname = "showimg";
                if(document.getElementById("showvid")) var showname = "showvid";
                if(document.getElementById("showtext")) var showname = "showtext";
                if(showname!="none") showname = document.getElementById(showname);
                if(showname){
                    boxWidth = showname.clientWidth;
                    boxHeight = showname.clientHeight;
                }else{
                    boxWidth = "300";
                    boxHeight = "300";
                }
                rotationbox.style.width = boxWidth + "px";
                rotationbox.style.height = boxHeight + "px";
                shadowbox.style.width = boxWidth + "px";
                shadowbox.style.height = boxHeight / 5 + "px";
                document.title = "ä¸‡ç‰©çš†å¯æ—‹è½¬ï¼ˆ" + rotationbox.style.width + " x " + rotationbox.style.height + "ï¼‰";
                headheight = (winbody.clientHeight - rotationbox.clientHeight) / 2
                rotationbox.style.marginLeft = (winbody.clientWidth - rotationbox.clientWidth) / 2 + "px";
                shadowbox.style.marginLeft = (winbody.clientWidth - rotationbox.clientWidth) / 2 + "px";
                lastsize = winbody.clientWidth - winbody.clientHeight
                setTimeout("applyresize()",500);
                anglechange();
            }
            
            //æ—‹è½¬æ¡†æ¶è§’åº¦/é€è§†
            function anglechange(mode,resize){
                var xinput = document.getElementById("Xangleinput");
                var xrange = document.getElementById("Xanglerange");
                var zinput = document.getElementById("Zangleinput");
                var zrange = document.getElementById("Zanglerange");
                var pinput = document.getElementById("perspectinput");
                var prange = document.getElementById("perspectrange");
                var aniset = document.getElementById("animationset");
                if(mode=="xrange"){
                    xinput.value = xrange.value - 180;
                }else if(mode=="zrange"){
                    zinput.value = zrange.value - 180;
                }else if(mode=="prange"){
                    pinput.value = 1000 - prange.value;
                }else{
                    xrange.value = Number(xinput.value) + 180;
                    zrange.value = Number(zinput.value) + 180;
                    prange.value = 1000 - pinput.value;
                }
                var BoxV = boxHeight / 10;
                var BoxIV = boxHeight / 5;
                var BoxII = boxWidth / 10;
                var BoxI = boxWidth / 7;
                aniset.innerHTML = "@keyframes headanimation{0%{margin-top:" + Number(headheight + BoxV) + "px}50%{margin-top:" + Number(headheight - BoxV) + "px}100%{margin-top:" + Number(headheight + BoxV) + "px}}  @keyframes shadowanimation{0%{filter:blur(" + BoxII + "px);margin-top:" + Number(BoxIV - BoxV) + "px}50%{filter:blur(" + BoxI + "px);margin-top:" + Number(BoxIV + BoxV) + "px}100%{filter:blur(" + BoxII + "px);margin-top:" + Number(BoxIV - BoxV) + "px}}  @keyframes boxanimation{0%{transform:perspective(" + pinput.value + "px) rotateX(" + xinput.value + "deg) rotateY(" + rotate_start_angle + "deg) rotateZ(" + zinput.value + "deg)}100%{transform:perspective(" + pinput.value + "px) rotateX(" + xinput.value + "deg) rotateY(" + rotate_end_angle + "deg) rotateZ(" + zinput.value + "deg)}}"
            }

            //åº”ç”¨åŠ¨ç”»é€Ÿåº¦
            function anispeed(mode){
                var input = document.getElementById("speedinput");
                var range = document.getElementById("speedrange")
                if(mode=="range"){input.value = 10 - range.value / 1000;}
                else{range.value = (10 - input.value) * 1000;}
                document.getElementById("rotationbox").style.animation = "boxanimation " + input.value + "s infinite linear";
                document.getElementById("shadowbox").style.animation = "shadowanimation " + input.value * 1.5 + "s infinite linear";;
                document.getElementById("headbox").style.animation = "headanimation " + input.value * 1.5 + "s infinite linear";;
            }

            //é˜´å½±å’Œæ­£åè½¬
            function reverse_shadow_sw(mode){
                if(document.getElementById("shadow_sw").checked){
                    document.getElementById("shadowbox").style.background = "#555";
                }else{
                    document.getElementById("shadowbox").style.background = "rgba(0,0,0,0)";
                }
                if(document.getElementById("reverse_sw").checked){
                    rotate_start_angle = 0;
                    rotate_end_angle = 360;
                }else{
                    rotate_start_angle = 360;
                    rotate_end_angle = 0;
                }
                if(mode!="load") anglechange();
            }

            //åˆ‡æ¢å›¾ç‰‡/è§†é¢‘/æ–‡æœ¬æ¨¡å¼
            function showmode(name){
                var txt = document.getElementById("txtopt");
                var img = document.getElementById("imgopt");
                var vid = document.getElementById("vidopt");
                var txtsw = document.getElementById("txtopt_sw");
                var imgsw = document.getElementById("imgopt_sw");
                var vidsw = document.getElementById("vidopt_sw");
                var highlight = "font-weight:bold;border-bottom:3px solid royalblue";
                var nolight = "border-bottom:3px solid rgba(0,0,0,0)"
                if(name=="txtopt_sw"){
                    txt.style.display = "block";
                    img.style.display = "none";
                    vid.style.display = "none";
                    txtsw.style = highlight;
                    imgsw.style = nolight;
                    vidsw.style = nolight;
                    applytext();
                }else if(name=="vidopt_sw"){
                    txt.style.display = "none";
                    img.style.display = "none";
                    vid.style.display = "block";
                    txtsw.style = nolight;
                    imgsw.style = nolight;
                    vidsw.style = highlight;
                    applyimgvid("vid");
                }else{
                    txt.style.display = "none";
                    img.style.display = "block";
                    vid.style.display = "none";
                    imgsw.style = highlight;
                    txtsw.style = nolight;
                    vidsw.style = nolight;
                    applyimgvid("img");
                }
                /*document.getElementById("txtopt").style.display = "none";
                document.getElementById("imgopt").style.display = "none";
                document.getElementById("txtopt_sw").style = "";
                document.getElementById("imgopt_sw").style = "";
                document.getElementById(name.substring(0,6)).style.display = "block";
                document.getElementById(name).style = "font-weight:bold;padding-bottom:5px;border-bottom:3px solid royalblue";*/
            }
            

            //åŠ è½½ç”¨æˆ·å›¾ç‰‡
            function imageget(){
                var file = anyimg.files[0];
                if(imgOrVid=="img"){
                    if(!/image\/\w+/.test(file.type)){
                        alert("è¯·ç¡®ä¿æ–‡ä»¶ä¸ºå›¾åƒç±»å‹,å¦åˆ™å°†æ— æ³•æ˜¾ç¤º");
                    }
                    var reader = new FileReader();
                    reader.readAsDataURL(file);
                    reader.onload = function(e){;
                        imgSrc = this.result;
                    }
                }
                else if(imgOrVid=="vid") vidSrc = URL.createObjectURL(file);
                applyimgvid(imgOrVid);
            }

            //åº”ç”¨å›¾ç‰‡
            function applyimgvid(mode,range){
                var rge = document.getElementById(mode + "WidthRange");
                var ipt = document.getElementById(mode + "WidthInput");
                if(range=="range") ipt.value = rge.value;
                if(mode=="img") var element = "<img src='" + imgSrc + "' id='showimg' style='width:" + ipt.value + "px'/>";
                if(mode=="vid") var element = "<video style='width:" + ipt.value + "px' id='showvid' loop onclick='this.play()'><source src='" + vidSrc + "'></video>"
                imgOrVid = mode;
                document.getElementById("rotationbox").innerHTML = element;
                //ç”¨æˆ·å¯¼å…¥å›¾ç‰‡
                if(window.FileReader){
                    anyimg = document.getElementById(mode + "FileInput");
                    anyimg.addEventListener('change',imageget,false);
                }else{
                    document.getElementById(mode + "opt_user").innerHTML = "æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè‡ªå®šä¹‰æ–‡ä»¶ã€‚";
                }
                applyresize();
            }
            
            //åº”ç”¨æ–‡å­—
            function applytext(mode){
                if(document.getElementById("showimg")) document.getElementById("showimg").remove();
                var sizeinput = document.getElementById("textsizeinput");
                var sizerange = document.getElementById("textsizerange");
                var txtinput = document.getElementById("inputtext");
                if(document.getElementById("showtext")) document.getElementById("showtext").innerHTML = txtinput.value;
                else document.getElementById("rotationbox").innerHTML = "<div id='showtext'>" + txtinput.value + "</div>";
                var txtset = document.getElementById("showtext");
                if(mode=="sizerange") sizeinput.value = sizerange.value;
                else sizerange.value = sizeinput.value;
                if(txtset.style.color=="") var txtcolor = "#000";
                else var txtcolor = txtset.style.color;
                if(txtset.style.backgroundColor=="") var txtbg = "rgba(17,69,20,0)";
                else var txtbg = txtset.style.backgroundColor;
                paddingset = sizeinput.value / 4;
                txtset.style = "white-space:nowrap;float:left;font-size:" + sizeinput.value + "px;padding:" + paddingset + "px;border-radius:" + paddingset + "px;color:" + txtcolor + ";background-color:" + txtbg;
                lastsize = 0;
            }

            //æ‰“å¼€èƒŒæ™¯å›¾ç‰‡/é¢œè‰²è®¾ç½®ç•Œé¢
            function coloropt_init(bgimg_enable,opacity){
                document.getElementById("rgbeditor").style.display = "block";
                if(bgimg_enable=="bgimg"){
                    document.getElementById("bgopt_sw").style.display = "inline"
                    if(document.body.style.background.substring(0,3)=="url") coloropt_mode();
                    else coloropt_mode("rgbedt_sw",opacity);
                }
                else{
                    document.getElementById("bgopt_sw").style.display = "none"
                    coloropt_mode("rgbedt_sw",opacity);
                }
            }

            //åˆ‡æ¢èƒŒæ™¯å›¾ç‰‡/é¢œè‰²æ¨¡å¼
            function coloropt_mode(name,opacity){
                var rgb = document.getElementById("rgbedt");
                var img = document.getElementById("bgimg");
                var rgbsw = document.getElementById("rgbedt_sw");
                var imgsw = document.getElementById("bgimg_sw");
                var highlight = "font-weight:bold;border-bottom:3px solid royalblue";
                var nolight = "border-bottom:3px solid rgba(0,0,0,0)"
                if(name=="rgbedt_sw"){
                    rgb.style.display = "table";
                    img.style.display = "none";
                    rgbsw.style = highlight;
                    imgsw.style = nolight;
                    rgbeditor_initbyid(rgb_id,rgb_attribute,opacity);
                }else{
                    rgb.style.display = "none";
                    img.style.display = "block";
                    imgsw.style = highlight;
                    rgbsw.style = nolight;
                    bgimg_init();
                }
            }

            //å¯¼å…¥èƒŒæ™¯å›¾ç‰‡
            function bgimg_init(){
                if(window.FileReader){
                    anyimg = document.getElementById("bgimg_input");
                    anyimg.addEventListener('change',bgimg_get,false);
                }
                else document.getElementById("bgimg").innerHTML = "æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè‡ªå®šä¹‰å›¾ç‰‡ã€‚";
                if(typeof(BgImg)!="undefined") bgimg_apply();
            }

            //åŠ è½½èƒŒæ™¯å›¾ç‰‡
            function bgimg_get(){
                var file = anyimg.files[0];
                if(file){
                    if(!/image\/\w+/.test(file.type)) alert("è¯·ç¡®ä¿æ–‡ä»¶ä¸ºå›¾åƒç±»å‹,å¦åˆ™å°†æ— æ³•æ˜¾ç¤º");
                    var reader = new FileReader();
                    reader.readAsDataURL(file);
                    reader.onload = function(e){;
                        BgImg = this.result;
                        bgimg_apply();
                    }
                }
            }

            //åº”ç”¨èƒŒæ™¯å›¾ç‰‡
            function bgimg_apply(){
                document.body.style = "background:url(" + BgImg + ");background-size:cover;background-position:center";
            }

            //åº”ç”¨è®¡æ—¶å™¨æ ·å¼
            function timer_optapply(mode){
                var weight = document.getElementsByName("timerweight");
                var sizeinput = document.getElementById("timersizeinput");
                var sizerange = document.getElementById("timersizerange");
                var timer = document.getElementById("timer");
                for(var i=0;i<weight.length;i++){
                    if(weight[i].checked) timer.style.fontWeight = weight[i].value;
                }
                if(document.getElementById("timer_enabled").checked) timer.style.display = "block";
                else{timer.style.display = "none";timework = "disabled"}
                if(mode=="sizerange") sizeinput.value = sizerange.value;
                timer.style.fontSize = sizeinput.value + "px";
                timer.style.padding = timer.style.borderRadius = sizeinput.value / 5 + "px";
            }

            //è®¡æ—¶å™¨æ‹–æ‹½è°ƒæ•´ä½ç½®
            var moveit = document.getElementById("timer");
            moveit.style.top = "0px";
            moveit.style.left = "0px";
            //é¼ æ ‡
            moveit.onmousedown = function(event){
                    moveX = event.clientX - moveit.offsetLeft;
                    moveY = event.clientY - moveit.offsetTop;
                document.onmousemove = function(event){
                    moveit.style.top = event.clientY - moveY + "px";
                    moveit.style.left = event.clientX - moveX + "px";
                }
                document.onmouseup = function(){
                    document.onmousemove = false;
                }
                return false;
            }
            //è§¦æ‘¸
            moveit.ontouchstart = function(event){
                    moveX = event.targetTouches[0].pageX - moveit.offsetLeft;
                    moveY = event.targetTouches[0].pageY - moveit.offsetTop;
                document.ontouchmove = function(event){
                    moveit.style.left = event.targetTouches[0].pageX - moveX + "px";
                    moveit.style.top = event.targetTouches[0].pageY - moveY + "px";
                }
                document.ontouchend = function(){
                    document.ontouchmove = false;
                }
                return false;
            }

            //è®¡æ—¶å™¨åˆ†ç§’é’Ÿ
            function timeminsec(params){
                if(timework=="enabled") setTimeout("timeminsec()",1000);
                secondnum++;
                if(secondnum==60){
                    minutenum++;
                    secondnum = 0;
                }
                msnumx = 0;
            }

            //è®¡æ—¶å™¨0.01ç§’
            function timems(){
                if(timework=="enabled") setTimeout("timems()",10);
                if(msnum==10) msnum = 0;
                msnum++;
            }

            //è®¡æ—¶å™¨0.1ç§’
            function timemsx(){
                if(timework=="enabled") setTimeout("timemsx()",100);
                msnumx++;
                if(msnumx==10) msnumx = 0;
                msnum = 0
            }

            //åˆ·æ–°è®¡æ—¶å™¨æ˜¾ç¤º
            function timedisplay(){
                if(String(minutenum).length==1) minutenum = "0" + minutenum
                if(String(secondnum).length==1) secondnum = "0" + secondnum;
                timefull = minutenum + ":" + secondnum + ":" + msnumx + msnum;
                document.getElementById("timer").innerHTML = timefull;
                if(timework=="enabled") setTimeout("timedisplay()",1);
                else document.getElementById("timer").innerHTML = "3 ç§’åå¼€å§‹";
            }
            
            //åˆå§‹åŒ–è®¡æ—¶å™¨
            function loadtime(mode){
                if(mode!="noreset") readyCountdown = 3;
                if(readyCountdown==0){
                    if(document.getElementById("timer").style.display!="none"){
                        timework = "enabled";
                        minutenum = 0
                        secondnum = 0;
                        msnumx = 0;
                        msnum = 0;
                        setTimeout("timeminsec()",1000);
                        setTimeout("timemsx()",100);
                        setTimeout("timems()",10);
                        timedisplay();
                    }
                    if(document.getElementById('showvid')){
                        var vid = document.getElementById('showvid');
                        vid.currentTime = 0;
                        vid.play();
                    }
                }
                else{
                    timework = "disabled";
                    if(document.getElementById("timer").style.display!="none") 
                    document.getElementById("timer").innerHTML = readyCountdown + " ç§’åå¼€å§‹";
                    readyCountdown = readyCountdown - 1;
                    setTimeout("loadtime('noreset')",1000);
                }
            }

            //åˆå§‹åŒ–
            imgSrc = "./nugget.png"
            vidSrc = "./test.mp4"
            document.getElementById("shadow_sw").checked = "true";
            reverse_shadow_sw("load");
            timer_optapply('sizerange')
            resizebox();
            showmode();
            anispeed();
            document.getElementById("loadingMask").remove();
        </script>
    </body>
</html>